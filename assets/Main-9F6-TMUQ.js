import{c as L,j as e,r as m,U as F,e as A,y as S}from"./index-BSpi81sx.js";import{P as $}from"./PostAPI-hjm0G22y.js";import{B as x,C as B,I as H,T as z,a as X,b as Z,H as q,V as O,R as W}from"./ViewHeaderWithButtons-CwUOT0if.js";import{R as G}from"./react-paginate-CG1Hdmos.js";import"./with-selector-D_HaI6M-.js";import"./AdminHome-Qo_R5WX7.js";import"./circle-check-DZa0BDg6.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],K=L("BadgeCheck",J);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]],Y=L("BadgeX",Q),E={CertificateID:0,UserID:null,UUID:"",CourseID:0,Status:"",IsComplete:0,IsPaymentUnderProcess:0,IsPaid:0,IsCertified:0,AmountReceived:"",Remarks:"",PaymentType:"",CertificatePath:"",EnrolledDate:"",PaymentImage:"",TransactionID:""},ee=[{fieldName:"IsPaid",type:"boolean",label:"Paid",IsVisible:!0,className:"w-1/2"},{fieldName:"IsCertified",type:"boolean",label:"Certified",IsVisible:!0,className:"w-1/2"},{fieldName:"UserName",type:"text",label:"Intern Name",IsVisible:!0,className:"w-full"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-1/2"},{fieldName:"EnrolledDate",type:"text",label:"Enrolled Date",IsVisible:!0,className:"w-1/2"}],se=[{fieldName:"UUID",type:"text",label:"UUID",IsVisible:!0,className:"w-full"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-full"},{fieldName:"UserName",type:"text",label:"Intern Name",IsVisible:!0,className:"w-full"},{fieldName:"IsPaid",type:"boolean",label:"Paid",IsVisible:!0,className:"w-1/2"},{fieldName:"IsComplete",type:"boolean",label:"Complete",IsVisible:!0,className:"w-1/2"},{fieldName:"IsCertified",type:"boolean",label:"Certified",IsVisible:!0,className:"w-1/2"},{fieldName:"AmountReceived",type:"number",label:"Amount Received",IsVisible:!0,className:"w-1/2"},{fieldName:"CertificatePath",type:"link",label:"Certificate",IsVisible:!0,className:"w-full"},{fieldName:"EnrolledDate",type:"text",label:"Enrolled Date",IsVisible:!0,className:"w-1/2"}],ae=[{label:"Course Name",fieldName:"CourseName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"Intern Name",fieldName:"UserName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"UUID",fieldName:"UUID",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"Status",fieldName:"Status",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Is Complete",fieldName:"IsComplete",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Is Payment Under Process",fieldName:"IsPaymentUnderProcess",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Is Paid",fieldName:"IsPaid",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Is Certified",fieldName:"IsCertified",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Amount Received",fieldName:"AmountReceived",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Remarks",fieldName:"Remarks",type:"text",className:"w-full",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Payment Type",fieldName:"PaymentType",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Certificate Path",fieldName:"CertificatePath",type:"text",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Enrolled Date",fieldName:"EnrolledDate",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Payment Image",fieldName:"PaymentImage",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Transaction ID",fieldName:"TransactionID",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0}],te=({handleSubmit:f,clearForm:r,primID:a,formConfig:n,formData:d,handleChange:c,onBack:l,title:u})=>e.jsxs("form",{onSubmit:f,className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("button",{className:"flex items-center rounded-full py-2 text-gray-700 hover:bg-gray-200 focus:outline-none",onClick:()=>l("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"text-md ml-2 pr-2 font-bold text-indigo-600",children:u})]}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 pr-2",children:[a?e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:l,color:"indigo",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:l,color:"red",icon:"close"}),e.jsx(x,{className:"hidden md:flex",name:"Clear",onClick:r,color:"red",icon:"cancel"})]}),e.jsx(x,{className:"hidden md:flex",name:a>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"flex w-full items-center justify-end gap-2 p-2",children:n.map(i=>i.type==="checkbox"&&i.IsVisible?e.jsx(B,{field:i,formData:d,handleChange:c},i.fieldName):"")}),e.jsx("div",{className:"mt-4 flex w-full flex-wrap gap-y-2",children:n.map(i=>i.type!=="checkbox"&&i.IsVisible?e.jsx(H,{field:i,formData:d,handleChange:c},i.fieldName):null)}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[a?e.jsx(x,{name:"Close",className:"text-lg",onClick:l,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{name:"Close",className:"text-lg",onClick:l,color:"red",icon:"close"}),e.jsx(x,{name:"Clear",className:"text-lg",onClick:r,color:"red",icon:"cancel"})]}),e.jsx(x,{name:a>0?"Update":"Save",icon:"save",type:"submit",color:"indigo"})]})})]}),le=({handleAdd:f,title:r,refresh:a,TotalCount:n})=>e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-md border border-0 border-l-2 border-indigo-600 pl-2 font-bold text-indigo-600",children:[r," (",n||0,")"]}),e.jsx("i",{title:"Refresh",onClick:a,className:"bi bi-arrow-clockwise ml-2 cursor-pointer text-indigo-700"})]}),e.jsx("div",{children:e.jsx(x,{className:"hidden md:flex",name:"Add",onClick:f,color:"indigo",icon:"add"})})]}),ie=({tableFields:f,cardViewFields:r,dataList:a,handleEdit:n,handleView:d,title:c,isCardView:l,setCardView:u,IDPK:i})=>{const[I,y]=m.useState(""),[C,g]=m.useState(0),[b,D]=m.useState(20),N=(s,t)=>{t(s.target.value),g(0)},k=()=>{u(!l),g(0)},P=({selected:s})=>{g(s)},V=s=>{N(s,D)},p=a.filter(s=>Object.values(s).join(" ").toLowerCase().includes(I.toLowerCase())),w=p.slice(C*b,(C+1)*b),U=Math.ceil(p.length/b),j=[{icon:"",color:"blue",title:"Certificate",functionNeed:(s,t)=>{let o=`${A.API_URL}certificate/${t.UUID}`;window.open(o,"_blank")}}];return e.jsxs("div",{className:"p-1",children:[e.jsx(z,{handleSearchChange:s=>N(s,y),searchInput:I,toggleView:k,isCardView:l,handleItemsPerPageChange:V,itemsPerPage:b}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-start gap-x-4",children:[e.jsx(R,{data:a,courseName:"Presentation Skills"}),e.jsx(R,{data:a,courseName:"Managerial Skills"}),e.jsx(R,{data:a,courseName:"HR Talent Acquisition"})]}),l?e.jsx(X,{data:w,cardViewFields:r,handleEdit:n,handleView:d,title:c,IDPK:i,actionsBtn:j}):e.jsx(Z,{tableFields:f,dataList:w,handleEdit:n,handleView:d,IDPK:i,actionsBtn:j}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-16"}),e.jsx("div",{className:"fixed right-0 bottom-0 left-0 flex items-center justify-center space-x-2 bg-white p-2",children:e.jsx(G,{pageCount:U,pageRangeDisplayed:2,marginPagesDisplayed:1,onPageChange:P,containerClassName:"pagination ml-2",activeClassName:"active",breakClassName:"break-me",breakLinkClassName:"break-link",pageClassName:"page",pageLinkClassName:"page-link",previousClassName:"previous ",previousLinkClassName:"previous-link",nextClassName:"next",nextLinkClassName:"next-link",disabledClassName:"disabled",onDoubleClick:s=>s.preventDefault()})})]})]})},R=({data:f,courseName:r})=>{const a=f.filter(l=>l.CourseName===r),n=a.length,d=a.filter(l=>l.IsCertified===0).length,c=a.filter(l=>l.IsCertified===1).length;return e.jsxs("div",{className:"flex w-full flex-col rounded-lg border border-gray-200 bg-white p-4 shadow-sm sm:w-64",children:[e.jsx("h3",{className:"mb-4 truncate text-sm font-semibold text-gray-700",children:r}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-blue-50 p-2 text-blue-600",children:e.jsx(F,{size:16})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Enrolled"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:n})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-green-50 p-2 text-green-600",children:e.jsx(K,{size:16})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Certified"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:c})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-red-50 p-2 text-red-600",children:e.jsx(Y,{size:16})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Not Certified"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:d})]})]})]})]})},ne=({formConfig:f,formData:r,primID:a,onBack:n,handleEdit:d,handleAdd:c,title:l})=>e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"w-full bg-white",children:[e.jsx(q,{title:l,onBack:n,handleEdit:d,handleAdd:c,primID:a}),e.jsx(O,{formConfig:f,formData:r}),e.jsx(W,{onBack:n,handleAdd:c,handleEdit:d,primID:a})]})}),T="CertificateID",ue=({type:f})=>{const[r,a]=m.useState(E),[n,d]=m.useState(ae),[c,l]=m.useState([]),[u,i]=m.useState("table"),[I,y]=m.useState(0),[C,g]=m.useState(!1),[b,D]=m.useState("");m.useEffect(()=>{N()},[]);const N=async s=>{try{const t=await fetch(`${A.API_URL}coursecertificates`);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const v=(await t.json()).data.map(h=>({...h,CertificatePath:`${A.API_URL}certificate/${h.UUID}`}));l(v),D(v.length)}catch(t){console.error("Error fetching data:",t)}},k=s=>{const{name:t,checked:o,type:v}=s.target;if(v==="checkbox")a(h=>({...h,[t]:o}));else{const h=s.target.value;a(_=>({..._,[t]:h}))}},P=async s=>{try{const{status:t,data:o}=await $("coursecertificates_save",{data:s});t===200&&o.code===200?(S.success(o.message),p(),i("table"),N()):S.warning(o.message)}catch(t){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",t),S.error("something went wrong!")}},V=s=>{s.preventDefault(),P(r)},p=()=>{a(E),y(0)},w=s=>{const t=c.find(o=>o[T]===s);y(s),a(t),i("entry")},U=s=>{const t=c.find(o=>o[T]===s);y(s),a(t),i("view")},M=()=>{p(),i("entry")},j=()=>{switch(u){case"entry":return e.jsx(te,{title:"Certificates",primID:I,formData:r,formConfig:n,handleChange:k,handleSubmit:V,clearForm:p,onBack:()=>i("table")});case"view":return e.jsx(ne,{title:"Certificates",primID:I,formConfig:n,formData:r,onBack:()=>i("table"),handleEdit:w,handleAdd:M});case"table":default:return e.jsx(ie,{IDPK:T,cardViewFields:ee,tableFields:se,dataList:c,handleEdit:w,handleView:U,isCardView:C,setCardView:g})}};return e.jsxs("div",{className:"w-screen p-2 md:w-full",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex w-full justify-between space-x-2",children:u==="table"&&e.jsx(le,{TotalCount:b,title:"Manage Certificates",handleAdd:M,refresh:N})})}),j()]})};export{ue as default};
